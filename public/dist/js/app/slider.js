define(["utils"],function(t){!function(i,e){"use strict";function s(t){return new s.prototype.init(t)}var s;s.prototype={build:function(){var i=this;this.slideBox=this.dom.children[0],this.slideBoxUl=this.slideBox.children[0],this.slideItem=this.slideBoxUl.getElementsByTagName("li"),this.slideItemLen=this.slideItem.length,this.slideWidth=this.dom.offsetWidth,this.slideHeight=this.dom.offsetHeight,t.setStyle(this.slideBox,{width:this.slideWidth+"px",height:this.slideHeight+"px",overflow:"hidden"});var s=this.slideItem[0].cloneNode(!0),n=this.slideItem[this.slideItemLen-1].cloneNode(!0);switch(this.effect){case"toggle":t.setStyle(this.slideBox,{width:this.slideWidth+"px",height:this.slideHeight+"px"});break;case"left":this.slideBoxUl.insertBefore(n,this.slideBoxUl.children[0]),this.slideBoxUl.appendChild(s),t.setStyle(i.slideBoxUl,{position:"relative",width:i.slideWidth*(i.slideItemLen+2)+"px",height:i.slideHeight+"px",transform:"translateX("+-i.slideWidth+"px)",transition:"0"});break;case"fade":t.setStyle(this.slideItem,{position:"absolute",left:0,top:0,"z-index":0,opacity:0,filter:"alpha(opacity=0)"}),t.setStyle(this.slideItem[0],{"z-index":1,opacity:1,filter:"alpha(opacity=100)"})}if(this.pagination){for(var a=e.createElement("div"),o=e.createElement("ol"),d=0;d<this.slideItemLen;d++){var l=e.createElement("li");l.innerText=(d+1).toString(),l.setAttribute("data-index",(d+1).toString()),o.appendChild(l)}o.children[0].className="active",a.className="slide-hd",a.appendChild(o),this.paginationBox=this.dom.appendChild(a),this.paginationBtns=this.paginationBox.getElementsByTagName("li")}if(this.navigation){var h=e.createElement("div"),r=e.createElement("div");h.className="slide-prev-btn",this.utils.text(h,"prev"),r.className="slide-next-btn",this.utils.text(r,"next"),t.setStyle([h,r],{display:"none"}),this.prevBtn=this.dom.appendChild(h),this.nextBtn=this.dom.appendChild(r)}this.navigation&&this.pauseOnHover&&(this.dom.onmouseover=function(e){i.isAutoPlay&&i.stop(),t.setStyle([i.prevBtn,i.nextBtn],{display:"block"})},this.dom.onmouseout=function(e){i.isAutoPlay&&i.play(),t.setStyle([i.prevBtn,i.nextBtn],{display:"none"})})},play:function(){var t=this;this.timer=setTimeout(function(){t.nextBind(),t.play()},t.duration)},stop:function(){clearTimeout(this.timer)},goTo:function(i){this.animated=!0;var s=this,n=function(){var t,i=e.createElement("div"),s={transition:"transitionend",MozTransition:"MozTransitionEnd",WebkitTransition:"webkitTransitionEnd",MSTransitionEnd:"MSTransitionEnd"};for(t in s)if(s.hasOwnProperty(t)&&"undefined"!==i.style[t])return s[t]};switch(this.effect){case"toggle":t.each(this.slideItem,function(t){t.style.display="none"}),this.slideItem[i-1].style.display="block",this.animated=!1;break;case"left":var a=0;a=parseInt(t.getStyle(s.slideBoxUl,"transform").replace(/[^0-9\-]/gi,""))+i,t.setStyle(this.slideBoxUl,{transition:s.speed+"ms",transform:"translateX("+a+"px)"});var o=function(){a>-s.slideWidth&&t.setStyle(s.slideBoxUl,{transition:"0ms",transform:"translateX("+-s.slideWidth*s.slideItemLen+"px)"}),a<-s.slideWidth*s.slideItemLen&&t.setStyle(s.slideBoxUl,{transition:"0ms",transform:"translateX("+-s.slideWidth+"px)"}),s.animated=!1,s.slideBoxUl.removeEventListener(n(),o,!1)};this.slideBoxUl.addEventListener(n(),o,!1);break;case"fade":for(var d=0;d<s.slideItemLen;d++)if(1===parseInt(t.getStyle(s.slideItem[d],"z-index"))){t.animate(s.slideItem[d],{opacity:0},s.speed,"easeOut",function(){t.setStyle(s.slideItem[d],"z-index",0)});break}t.animate(s.slideItem[i-1],{opacity:100},s.speed,"easeOut",function(){t.setStyle(s.slideItem[i-1],"z-index",1),s.animated=!1})}},showButton:function(){for(var t=0;t<this.slideItemLen;t++)if("active"===this.paginationBtns[t].className){this.paginationBtns[t].className="";break}this.paginationBtns[this.index-1].className="active"},nextBind:function(){if(!this.animated){switch(this.index==this.slideItemLen?this.index=1:this.index++,this.effect){case"toggle":this.goTo(this.index);break;case"left":this.goTo(-this.slideWidth);break;case"fade":this.goTo(this.index)}this.pagination&&this.showButton()}},prevBind:function(){if(!this.animated){switch(1==this.index?this.index=this.slideItemLen:this.index--,this.effect){case"toggle":this.goTo(this.index);break;case"left":this.goTo(this.slideWidth);break;case"fade":this.goTo(this.index)}this.pagination&&this.showButton()}},navigationFn:function(){var t=this;this.nextBtn.onclick=function(i){t.nextBind()},this.prevBtn.onclick=function(i){t.prevBind()}},paginationFn:function(){for(var t=this,i=0;i<this.slideItemLen;i++)this.paginationBtns[i]["on"+this.trigger]=function(i){if(!t.animated&&"active"!==this.className){var e=parseInt(this.getAttribute("data-index")),s=0;switch(t.effect){case"toggle":s=e;break;case"left":s=-t.slideWidth*(e-t.index);break;case"fade":s=e}t.goTo(s),t.index=e,t.showButton()}}},init:function(t){this.dom=t.dom,this.duration=t.duration||5e3,this.speed=t.speed||400,this.effect=t.effect||"left",this.isAutoPlay=t.isAutoPlay||!1,this.trigger=t.trigger||"click",this.pagination=t.pagination||!1,this.navigation=t.navigation||!1,this.pauseOnHover=t.pauseOnHover||!1,this.index=1,this.timer=null,this.animated=!1,this.build(),this.isAutoPlay&&this.play(),this.navigation&&this.navigationFn(),this.pagination&&this.paginationFn()}},s.prototype.init.prototype=s.prototype,i.Slider=s}(window,document)});