define(["jquery","validate"],function(e,n){$.support.cors=!0,validator=$(function(){jQuery.prototype.serializeObject=function(){var e,n,i,a,r;for(e=this.serializeArray(),n={},i=n.hasOwnProperty,a=0;a<e.length;a++)r=e[a],i.call(n,r.name)||(n[r.name]=r.value);return n};var e={signIn:function(e){$(e).validate({rules:{name:{required:!0,minlength:2,maxlength:15},password:{required:!0,minlength:2,maxlength:15}},messages:{name:{required:"必须填写用户名",minlength:"用户名最小2位",maxlength:"用户名最大15位"},password:{required:"必须填写密码",minlength:"密码最小2位",maxlength:"密码最大15位"}},submitHandler:function(){$.ajax({url:"signin",method:"POST",data:{user:$(e).serializeObject()}}).done(function(n){switch(console.log(n),n.data){case 0:$(e).find("input:eq(0)").val().length>1&&$(e).find(".error:eq(0)").html("用户不存在！").show();break;case 1:$(e).find("input:eq(1)").val().length>1&&$(e).find(".error:eq(1)").html("密码错误！").show();break;case 2:$(".signin-msg").html("请到注册邮箱激活").show();break;default:$(".signin-msg").html("登录成功").show(),$("a")[0].click()}})}})},signUp:function(e){$(e).validate({rules:{name:{required:!0,minlength:2,maxlength:15},password:{required:!0,minlength:2,maxlength:15},"confirm-password":{equalTo:$(e).find("input:eq(1)")},email:!0},messages:{name:{required:"必须填写用户名",minlength:"用户名最小2位",maxlength:"用户名最大15位"},password:{required:"必须填写密码",minlength:"密码最小2位",maxlength:"密码最大15位"},"confirm-password":"两次输入的密码不相同",email:"请输入正确格式的电子邮件"},submitHandler:function(){$.ajax({url:"signup",method:"POST",data:{user:$(e).serializeObject()}}).done(function(e){switch(console.log(e),e.data){case 0:$(".signup-msg").html("用户已存在").show();break;default:$(".signup-msg").html("注册成功,请到注册邮箱完成账号激活").show()}})}})}};e.signIn("#signinForm"),e.signUp("#signupForm")})});